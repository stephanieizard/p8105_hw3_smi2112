---
title: "p8105_hw3_smi2112"
author: "Stephanie Izard"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(ggridges)
```

##Problem 1

Loading BRFSS data from p8105.datasets package:

```{r cache = TRUE}
library(p8105.datasets)
data("brfss_smart2010")
```

Data cleaning: Use appropriate names, focus on the "Overall Health" topic, include only responses from "Excellent" to "Poor", organize responses as a factor taking levels ordered from "Excellent" to "Poor".

```{r}
brfss = brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  rename(state = locationabbr, county = locationdesc) %>% 
  filter(topic == "Overall Health") %>% 
  mutate(response = forcats::fct_relevel(response, c("Excellent", "Very good", "Good", "Fair","Poor")))
```

Question: In 2002, which states were observed at 7 locations? 

```{r}
brfss %>% 
  filter(year == 2002) %>% 
  select(state, county) %>% 
  group_by(state) %>% 
  sum(county)

```

Answer:

Spaghetti plot showing the number of locations in each state from 2002 to 2010:

```{r}
brfss %>%
  ggplot(aes(x = year, y = ))

```

Table showing for the years 2002, 2006, and 2010 the mean and std of the proportion of "Execllent" responses across lcoations in NYS:

```{r}
brfss %>% 
  select(year, response) %>% 
  filter(year == 2002 | year == 2006 | year == 2010) %>% 
  group_by(year) %>% 
  summarize(mean(response == "Excellent"), sd(response == "Excellent"))
```

For each year and state, the average proportion in each response category.


```{r}
brfss %>% 
  select(year, state, response) %>% 
  group_by(year, state) %>% 
  mutate(response_count = count(response)) 

brfss %>% 
  group_by(year, state) %>% 
  mutate(response_avg = count(response))) %>% 
  ungroup()

ggplot(brfss, aes(x = year)) +
  geom_density(aes(fill = state), alpha = 0.5) +
  facet_grid( ~ response) +
  theme_bw()
  

```


##Problem 2

Loading instacart data:

```{r cache = TRUE}
data("instacart")
```

##Problem 3

Loading in NY NOAA data:

```{r cache = TRUE}
data("ny_noaa")
```












